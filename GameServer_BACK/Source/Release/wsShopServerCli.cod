; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\muserver_dev\development\MU-S8EP2-Repack\GameServer\Source\wsShopServerCli.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_7wsShopServerCli@@6B@			; wsShopServerCli::`vftable'
PUBLIC	??0wsShopServerCli@@QAE@XZ			; wsShopServerCli::wsShopServerCli
PUBLIC	??_R4wsShopServerCli@@6B@			; wsShopServerCli::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVwsShopServerCli@@@8			; wsShopServerCli `RTTI Type Descriptor'
PUBLIC	??_R3wsShopServerCli@@8				; wsShopServerCli::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2wsShopServerCli@@8				; wsShopServerCli::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@wsShopServerCli@@8		; wsShopServerCli::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R13?0A@EA@MyWinsockBase@@8			; MyWinsockBase::`RTTI Base Class Descriptor at (4,-1,0,64)'
PUBLIC	??_R0?AVMyWinsockBase@@@8			; MyWinsockBase `RTTI Type Descriptor'
PUBLIC	??_R3MyWinsockBase@@8				; MyWinsockBase::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2MyWinsockBase@@8				; MyWinsockBase::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@MyWinsockBase@@8			; MyWinsockBase::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??0MyWinsockBase@@QAE@XZ:PROC			; MyWinsockBase::MyWinsockBase
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_EwsShopServerCli@@UAEPAXI@Z:PROC		; wsShopServerCli::`vector deleting destructor'
;	COMDAT ??_R1A@?0A@EA@MyWinsockBase@@8
; File c:\muserver_dev\development\mu-s8ep2-repack\gameserver\source\wsshopservercli.cpp
rdata$r	SEGMENT
??_R1A@?0A@EA@MyWinsockBase@@8 DD FLAT:??_R0?AVMyWinsockBase@@@8 ; MyWinsockBase::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R2MyWinsockBase@@8
rdata$r	SEGMENT
??_R2MyWinsockBase@@8 DD FLAT:??_R1A@?0A@EA@MyWinsockBase@@8 ; MyWinsockBase::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3MyWinsockBase@@8
rdata$r	SEGMENT
??_R3MyWinsockBase@@8 DD 00H				; MyWinsockBase::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVMyWinsockBase@@@8
_DATA	SEGMENT
??_R0?AVMyWinsockBase@@@8 DD FLAT:??_7type_info@@6B@	; MyWinsockBase `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVMyWinsockBase@@', 00H
_DATA	ENDS
;	COMDAT ??_R13?0A@EA@MyWinsockBase@@8
rdata$r	SEGMENT
??_R13?0A@EA@MyWinsockBase@@8 DD FLAT:??_R0?AVMyWinsockBase@@@8 ; MyWinsockBase::`RTTI Base Class Descriptor at (4,-1,0,64)'
	DD	00H
	DD	04H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R1A@?0A@EA@wsShopServerCli@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@wsShopServerCli@@8 DD FLAT:??_R0?AVwsShopServerCli@@@8 ; wsShopServerCli::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	01H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3wsShopServerCli@@8
rdata$r	ENDS
;	COMDAT ??_R2wsShopServerCli@@8
rdata$r	SEGMENT
??_R2wsShopServerCli@@8 DD FLAT:??_R1A@?0A@EA@wsShopServerCli@@8 ; wsShopServerCli::`RTTI Base Class Array'
	DD	FLAT:??_R13?0A@EA@MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R3wsShopServerCli@@8
rdata$r	SEGMENT
??_R3wsShopServerCli@@8 DD 00H				; wsShopServerCli::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	02H
	DD	FLAT:??_R2wsShopServerCli@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVwsShopServerCli@@@8
_DATA	SEGMENT
??_R0?AVwsShopServerCli@@@8 DD FLAT:??_7type_info@@6B@	; wsShopServerCli `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVwsShopServerCli@@', 00H
_DATA	ENDS
;	COMDAT ??_R4wsShopServerCli@@6B@
rdata$r	SEGMENT
??_R4wsShopServerCli@@6B@ DD 00H			; wsShopServerCli::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVwsShopServerCli@@@8
	DD	FLAT:??_R3wsShopServerCli@@8
rdata$r	ENDS
;	COMDAT ??_7wsShopServerCli@@6B@
CONST	SEGMENT
??_7wsShopServerCli@@6B@ DD FLAT:??_R4wsShopServerCli@@6B@ ; wsShopServerCli::`vftable'
	DD	FLAT:??_EwsShopServerCli@@UAEPAXI@Z
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ??0wsShopServerCli@@QAE@XZ
_TEXT	SEGMENT
??0wsShopServerCli@@QAE@XZ PROC				; wsShopServerCli::wsShopServerCli, COMDAT
; _this$ = ecx

; 15   : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx
  00003	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  00006	e8 00 00 00 00	 call	 ??0MyWinsockBase@@QAE@XZ ; MyWinsockBase::MyWinsockBase
  0000b	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7wsShopServerCli@@6B@

; 16   : 	return;
; 17   : }

  00011	8b c6		 mov	 eax, esi
  00013	5e		 pop	 esi
  00014	c3		 ret	 0
??0wsShopServerCli@@QAE@XZ ENDP				; wsShopServerCli::wsShopServerCli
_TEXT	ENDS
PUBLIC	??1wsShopServerCli@@UAE@XZ			; wsShopServerCli::~wsShopServerCli
EXTRN	??1MyWinsockBase@@QAE@XZ:PROC			; MyWinsockBase::~MyWinsockBase
; Function compile flags: /Ogtp
;	COMDAT ??1wsShopServerCli@@UAE@XZ
_TEXT	SEGMENT
??1wsShopServerCli@@UAE@XZ PROC				; wsShopServerCli::~wsShopServerCli, COMDAT
; _this$ = ecx

; 20   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7wsShopServerCli@@6B@

; 21   : 	return;
; 22   : }

  00006	83 c1 04	 add	 ecx, 4
  00009	e9 00 00 00 00	 jmp	 ??1MyWinsockBase@@QAE@XZ ; MyWinsockBase::~MyWinsockBase
??1wsShopServerCli@@UAE@XZ ENDP				; wsShopServerCli::~wsShopServerCli
_TEXT	ENDS
PUBLIC	?SetProtocolCore@wsShopServerCli@@QAEHP6AXKPAEH@Z@Z ; wsShopServerCli::SetProtocolCore
; Function compile flags: /Ogtp
;	COMDAT ?SetProtocolCore@wsShopServerCli@@QAEHP6AXKPAEH@Z@Z
_TEXT	SEGMENT
_pc$ = 8						; size = 4
?SetProtocolCore@wsShopServerCli@@QAEHP6AXKPAEH@Z@Z PROC ; wsShopServerCli::SetProtocolCore, COMDAT
; _this$ = ecx

; 27   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 28   : 	this->wsProtocolCore = pc;

  00003	8b 45 08	 mov	 eax, DWORD PTR _pc$[ebp]
  00006	89 81 24 00 19
	00		 mov	 DWORD PTR [ecx+1638436], eax

; 29   : 	return TRUE;

  0000c	b8 01 00 00 00	 mov	 eax, 1

; 30   : }

  00011	5d		 pop	 ebp
  00012	c2 04 00	 ret	 4
?SetProtocolCore@wsShopServerCli@@QAEHP6AXKPAEH@Z@Z ENDP ; wsShopServerCli::SetProtocolCore
_TEXT	ENDS
PUBLIC	??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@ ; `string'
PUBLIC	??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BE@MIAGCGEJ@wsShopServerCli?4cpp?$AA@	; `string'
PUBLIC	__$ArrayPad$
PUBLIC	?Connect@wsShopServerCli@@QAEHPADGK@Z		; wsShopServerCli::Connect
EXTRN	?SetConnect@MyWinsockBase@@QAEXH@Z:PROC		; MyWinsockBase::SetConnect
EXTRN	__imp__closesocket@4:PROC
EXTRN	__imp__WSAAsyncSelect@16:PROC
EXTRN	?Close@MyWinsockBase@@QAEHI@Z:PROC		; MyWinsockBase::Close
EXTRN	__imp__WSAGetLastError@0:PROC
EXTRN	__imp__connect@12:PROC
EXTRN	__imp__gethostbyname@4:PROC
EXTRN	__imp__inet_addr@4:PROC
EXTRN	__imp__ntohs@4:PROC
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	___security_cookie:DWORD
EXTRN	@__security_check_cookie@4:PROC
EXTRN	_memcpy:PROC
;	COMDAT ??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@ DB 'Client W'
	DB	'SAAsyncSelect error %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@
CONST	SEGMENT
??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@ DB 'serve'
	DB	'r name not found [%s]', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@ DB ' Connect Error'
	DB	' %s %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@MIAGCGEJ@wsShopServerCli?4cpp?$AA@
CONST	SEGMENT
??_C@_0BE@MIAGCGEJ@wsShopServerCli?4cpp?$AA@ DB 'wsShopServerCli.cpp', 00H ; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?Connect@wsShopServerCli@@QAEHPADGK@Z
_TEXT	SEGMENT
_addr$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_ip_addr$ = 8						; size = 4
_port$ = 12						; size = 2
_WinMsgNum$ = 16					; size = 4
?Connect@wsShopServerCli@@QAEHPADGK@Z PROC		; wsShopServerCli::Connect, COMDAT
; _this$ = ecx

; 34   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b f1		 mov	 esi, ecx

; 35   : 	hostent* host = NULL;
; 36   : 	sockaddr_in addr;
; 37   : 	int nResult;
; 38   : 
; 39   : 	if ( this->m_hWnd == NULL )

  00013	83 7e 08 00	 cmp	 DWORD PTR [esi+8], 0
  00017	57		 push	 edi
  00018	8b 7d 08	 mov	 edi, DWORD PTR _ip_addr$[ebp]
  0001b	75 29		 jne	 SHORT $LN6@Connect

; 40   : 	{
; 41   : 		LogAdd(" Connect Error %s %d", __FILE__, __LINE__);

  0001d	6a 29		 push	 41			; 00000029H
  0001f	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@MIAGCGEJ@wsShopServerCli?4cpp?$AA@
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@
  00029	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0002f	83 c4 0c	 add	 esp, 12			; 0000000cH
  00032	5f		 pop	 edi

; 42   : 		return FALSE;

  00033	33 c0		 xor	 eax, eax
  00035	5e		 pop	 esi

; 82   : 
; 83   : 	return TRUE;
; 84   : }

  00036	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00039	33 cd		 xor	 ecx, ebp
  0003b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00040	8b e5		 mov	 esp, ebp
  00042	5d		 pop	 ebp
  00043	c2 0c 00	 ret	 12			; 0000000cH
$LN6@Connect:

; 43   : 	}
; 44   : 
; 45   : 	addr.sin_family = AF_INET;
; 46   : 	addr.sin_port =  ntohs(port);

  00046	8b 4d 0c	 mov	 ecx, DWORD PTR _port$[ebp]
  00049	b8 02 00 00 00	 mov	 eax, 2
  0004e	51		 push	 ecx
  0004f	66 89 45 ec	 mov	 WORD PTR _addr$[ebp], ax
  00053	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__ntohs@4

; 47   : 	addr.sin_addr.S_un.S_addr = inet_addr(ip_addr);

  00059	57		 push	 edi
  0005a	66 89 45 ee	 mov	 WORD PTR _addr$[ebp+2], ax
  0005e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__inet_addr@4
  00064	89 45 f0	 mov	 DWORD PTR _addr$[ebp+4], eax

; 48   : 
; 49   : 	if ( addr.sin_addr.S_un.S_addr == -1 )

  00067	83 f8 ff	 cmp	 eax, -1
  0006a	75 45		 jne	 SHORT $LN5@Connect

; 50   : 	{
; 51   : 		host = gethostbyname(ip_addr);

  0006c	57		 push	 edi
  0006d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__gethostbyname@4

; 52   : 		if ( host == 0 )

  00073	85 c0		 test	 eax, eax
  00075	75 23		 jne	 SHORT $LN4@Connect

; 53   : 		{
; 54   : 			LogAdd("server name not found [%s]", ip_addr);

  00077	57		 push	 edi
  00078	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@
  0007d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00083	83 c4 08	 add	 esp, 8
  00086	5f		 pop	 edi

; 55   : 			return FALSE;

  00087	33 c0		 xor	 eax, eax
  00089	5e		 pop	 esi

; 82   : 
; 83   : 	return TRUE;
; 84   : }

  0008a	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0008d	33 cd		 xor	 ecx, ebp
  0008f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00094	8b e5		 mov	 esp, ebp
  00096	5d		 pop	 ebp
  00097	c2 0c 00	 ret	 12			; 0000000cH
$LN4@Connect:

; 56   : 		}
; 57   : 
; 58   : 		memcpy(&addr.sin_addr.S_un.S_addr, *host->h_addr_list  , host->h_length  );	

  0009a	0f bf 50 0a	 movsx	 edx, WORD PTR [eax+10]
  0009e	8b 40 0c	 mov	 eax, DWORD PTR [eax+12]
  000a1	8b 08		 mov	 ecx, DWORD PTR [eax]
  000a3	52		 push	 edx
  000a4	51		 push	 ecx
  000a5	8d 55 f0	 lea	 edx, DWORD PTR _addr$[ebp+4]
  000a8	52		 push	 edx
  000a9	e8 00 00 00 00	 call	 _memcpy
  000ae	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN5@Connect:

; 59   : 	}
; 60   : 
; 61   : 	nResult=connect(this->m_socket, (sockaddr*)&addr, 16);

  000b1	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]
  000b4	6a 10		 push	 16			; 00000010H
  000b6	8d 45 ec	 lea	 eax, DWORD PTR _addr$[ebp]
  000b9	50		 push	 eax
  000ba	51		 push	 ecx
  000bb	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__connect@12

; 62   : 
; 63   : 	if (nResult== -1)

  000c1	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__WSAGetLastError@0
  000c7	83 f8 ff	 cmp	 eax, -1
  000ca	75 29		 jne	 SHORT $LN2@Connect

; 64   : 	{
; 65   : 		if ( WSAGetLastError() != WSAEWOULDBLOCK)

  000cc	ff d7		 call	 edi
  000ce	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  000d3	74 20		 je	 SHORT $LN2@Connect

; 66   : 		{
; 67   : 			this->Close(this->m_socket );

  000d5	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  000d8	52		 push	 edx
  000d9	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  000dc	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHI@Z ; MyWinsockBase::Close
  000e1	5f		 pop	 edi

; 68   : 			return FALSE;

  000e2	33 c0		 xor	 eax, eax
  000e4	5e		 pop	 esi

; 82   : 
; 83   : 	return TRUE;
; 84   : }

  000e5	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e8	33 cd		 xor	 ecx, ebp
  000ea	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ef	8b e5		 mov	 esp, ebp
  000f1	5d		 pop	 ebp
  000f2	c2 0c 00	 ret	 12			; 0000000cH
$LN2@Connect:

; 69   : 		}
; 70   : 	}
; 71   : 
; 72   : 	nResult=WSAAsyncSelect(this->m_socket, this->m_hWnd , WinMsgNum, FD_READ|FD_WRITE|FD_CLOSE);

  000f5	8b 45 10	 mov	 eax, DWORD PTR _WinMsgNum$[ebp]
  000f8	8b 4e 08	 mov	 ecx, DWORD PTR [esi+8]
  000fb	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  000fe	6a 23		 push	 35			; 00000023H
  00100	50		 push	 eax
  00101	51		 push	 ecx
  00102	52		 push	 edx
  00103	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAAsyncSelect@16

; 73   : 
; 74   : 	if ( nResult == -1 )

  00109	83 f8 ff	 cmp	 eax, -1
  0010c	75 2f		 jne	 SHORT $LN1@Connect

; 75   : 	{
; 76   : 		closesocket(this->m_socket );

  0010e	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  00111	50		 push	 eax
  00112	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__closesocket@4

; 77   : 		LogAdd("Client WSAAsyncSelect error %d", WSAGetLastError());

  00118	ff d7		 call	 edi
  0011a	50		 push	 eax
  0011b	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@
  00120	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00126	83 c4 08	 add	 esp, 8
  00129	5f		 pop	 edi

; 78   : 		return FALSE;

  0012a	33 c0		 xor	 eax, eax
  0012c	5e		 pop	 esi

; 82   : 
; 83   : 	return TRUE;
; 84   : }

  0012d	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00130	33 cd		 xor	 ecx, ebp
  00132	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00137	8b e5		 mov	 esp, ebp
  00139	5d		 pop	 ebp
  0013a	c2 0c 00	 ret	 12			; 0000000cH
$LN1@Connect:

; 79   : 	}
; 80   : 	this->m_SendBufLen=0;
; 81   : 	this->SetConnect(TRUE);

  0013d	6a 01		 push	 1
  0013f	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  00142	c7 86 1c 80 0c
	00 00 00 00 00	 mov	 DWORD PTR [esi+819228], 0
  0014c	e8 00 00 00 00	 call	 ?SetConnect@MyWinsockBase@@QAEXH@Z ; MyWinsockBase::SetConnect

; 82   : 
; 83   : 	return TRUE;
; 84   : }

  00151	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00154	5f		 pop	 edi
  00155	33 cd		 xor	 ecx, ebp
  00157	b8 01 00 00 00	 mov	 eax, 1
  0015c	5e		 pop	 esi
  0015d	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00162	8b e5		 mov	 esp, ebp
  00164	5d		 pop	 ebp
  00165	c2 0c 00	 ret	 12			; 0000000cH
?Connect@wsShopServerCli@@QAEHPADGK@Z ENDP		; wsShopServerCli::Connect
_TEXT	ENDS
PUBLIC	??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@ ; `string'
PUBLIC	??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@ ; `string'
PUBLIC	??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@ ; `string'
PUBLIC	??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@ ; `string'
PUBLIC	?DataSend@wsShopServerCli@@QAEHPADH@Z		; wsShopServerCli::DataSend
EXTRN	?LogAddC@@3P6AXEPADZZA:DWORD			; LogAddC
EXTRN	__imp__send@16:PROC
EXTRN	?Close@MyWinsockBase@@QAEHXZ:PROC		; MyWinsockBase::Close
;	COMDAT ??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@
CONST	SEGMENT
??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@ DB 'er'
	DB	'ror-L3 : send()  result is zero', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@
CONST	SEGMENT
??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@ DB 'error-'
	DB	'L3 : buffer error closed %d, %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@
CONST	SEGMENT
??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@ DB 'er'
	DB	'ror-L3 : %d (%s %d)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@
CONST	SEGMENT
??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@ DB 'erro'
	DB	'r-L3 : Copy1 : nLeft:%d len:%d nDx:%d', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DataSend@wsShopServerCli@@QAEHPADH@Z
_TEXT	SEGMENT
_buf$ = 8						; size = 4
_nLeft$ = 12						; size = 4
_len$ = 12						; size = 4
?DataSend@wsShopServerCli@@QAEHPADH@Z PROC		; wsShopServerCli::DataSend, COMDAT
; _this$ = ecx

; 90   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 91   : 	int nResult;
; 92   : 	int nLeft;
; 93   : 	int nDx;	// Degeneration X :)
; 94   : 	LPBYTE sendbuf;
; 95   : 	int* sendbuflen;
; 96   : 	
; 97   : 	if ( len <= 0 )

  00004	8b 5d 0c	 mov	 ebx, DWORD PTR _len$[ebp]
  00007	56		 push	 esi
  00008	8b f1		 mov	 esi, ecx
  0000a	85 db		 test	 ebx, ebx
  0000c	7f 08		 jg	 SHORT $LN14@DataSend
$LN26@DataSend:
  0000e	5e		 pop	 esi

; 98   : 	{
; 99   : 		return 0;

  0000f	33 c0		 xor	 eax, eax
  00011	5b		 pop	 ebx

; 178  : }

  00012	5d		 pop	 ebp
  00013	c2 08 00	 ret	 8
$LN14@DataSend:

; 100  : 	}
; 101  : 
; 102  : 	if ( this->m_socket  == INVALID_SOCKET )	// 

  00016	83 7e 0c ff	 cmp	 DWORD PTR [esi+12], -1

; 103  : 	{
; 104  : 		return 0;

  0001a	74 f2		 je	 SHORT $LN26@DataSend

; 105  : 	}
; 106  : 
; 107  : 	nDx = 0;
; 108  : 
; 109  : 	sendbuf = this->m_SendBuf;
; 110  : 	sendbuflen= &len;	// Strange, dangeorus
; 111  : 
; 112  : 	if ( this->m_SendBufLen   > 0 )

  0001c	8b 86 1c 80 0c
	00		 mov	 eax, DWORD PTR [esi+819228]
  00022	57		 push	 edi
  00023	33 ff		 xor	 edi, edi
  00025	85 c0		 test	 eax, eax
  00027	7e 3e		 jle	 SHORT $LN12@DataSend

; 113  : 	{
; 114  : 		if ( (this->m_SendBufLen +len) < 819200 )

  00029	8d 0c 18	 lea	 ecx, DWORD PTR [eax+ebx]
  0002c	81 f9 00 80 0c
	00		 cmp	 ecx, 819200		; 000c8000H
  00032	7d 22		 jge	 SHORT $LN11@DataSend

; 115  : 		{
; 116  : 			memcpy( &this->m_SendBuf[this->m_SendBufLen]  , buf, len);	// Review this later

  00034	8b 55 08	 mov	 edx, DWORD PTR _buf$[ebp]
  00037	53		 push	 ebx
  00038	52		 push	 edx
  00039	8d 44 30 1c	 lea	 eax, DWORD PTR [eax+esi+28]
  0003d	50		 push	 eax
  0003e	e8 00 00 00 00	 call	 _memcpy
  00043	83 c4 0c	 add	 esp, 12			; 0000000cH

; 117  : 
; 118  : 			this->m_SendBufLen +=len;

  00046	01 9e 1c 80 0c
	00		 add	 DWORD PTR [esi+819228], ebx

; 173  : 		{
; 174  : 			break;
; 175  : 		}
; 176  : 	}
; 177  : 	return TRUE;

  0004c	8d 47 01	 lea	 eax, DWORD PTR [edi+1]
  0004f	5f		 pop	 edi
  00050	5e		 pop	 esi
  00051	5b		 pop	 ebx

; 178  : }

  00052	5d		 pop	 ebp
  00053	c2 08 00	 ret	 8
$LN11@DataSend:

; 119  : 			return 1;
; 120  : 		}
; 121  : 		this->Close();

  00056	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  00059	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close
  0005e	5f		 pop	 edi
  0005f	5e		 pop	 esi

; 122  : 		return FALSE;

  00060	33 c0		 xor	 eax, eax
  00062	5b		 pop	 ebx

; 178  : }

  00063	5d		 pop	 ebp
  00064	c2 08 00	 ret	 8
$LN12@DataSend:

; 123  : 	}
; 124  : 
; 125  : 	nLeft= *sendbuflen;

  00067	89 5d 0c	 mov	 DWORD PTR _nLeft$[ebp], ebx
  0006a	8d 9b 00 00 00
	00		 npad	 6
$LL10@DataSend:

; 126  : 
; 127  : 	while ( true )
; 128  : 	{
; 129  : 		nResult=send(this->m_socket, (char*)&buf[nDx], (*sendbuflen - nDx), 0);

  00070	8b 55 08	 mov	 edx, DWORD PTR _buf$[ebp]
  00073	6a 00		 push	 0
  00075	8b cb		 mov	 ecx, ebx
  00077	2b cf		 sub	 ecx, edi
  00079	51		 push	 ecx
  0007a	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]
  0007d	8d 04 17	 lea	 eax, DWORD PTR [edi+edx]
  00080	50		 push	 eax
  00081	51		 push	 ecx
  00082	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__send@16

; 130  : 
; 131  : 		if ( nResult == -1)

  00088	83 f8 ff	 cmp	 eax, -1
  0008b	75 6b		 jne	 SHORT $LN8@DataSend

; 132  : 		{
; 133  : 			if ( WSAGetLastError() != WSAEWOULDBLOCK )

  0008d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  00093	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  00098	0f 85 81 00 00
	00		 jne	 $LN19@DataSend

; 139  : 			}
; 140  : 
; 141  : 			if ( (*sendbuflen + nLeft) > 819200 )

  0009e	8b 45 0c	 mov	 eax, DWORD PTR _nLeft$[ebp]
  000a1	8d 14 18	 lea	 edx, DWORD PTR [eax+ebx]
  000a4	81 fa 00 80 0c
	00		 cmp	 edx, 819200		; 000c8000H
  000aa	0f 8f a3 00 00
	00		 jg	 $LN20@DataSend

; 147  : 			}
; 148  : 
; 149  : 			if ( nDx >= 0 )

  000b0	85 ff		 test	 edi, edi
  000b2	78 55		 js	 SHORT $LN24@DataSend

; 150  : 			{
; 151  : 				memcpy( &this->m_SendBuf[this->m_SendBufLen],  &buf[nDx], nLeft);

  000b4	8b 55 08	 mov	 edx, DWORD PTR _buf$[ebp]
  000b7	8b 8e 1c 80 0c
	00		 mov	 ecx, DWORD PTR [esi+819228]
  000bd	50		 push	 eax
  000be	8d 04 17	 lea	 eax, DWORD PTR [edi+edx]
  000c1	50		 push	 eax
  000c2	8d 54 31 1c	 lea	 edx, DWORD PTR [ecx+esi+28]
  000c6	52		 push	 edx
  000c7	e8 00 00 00 00	 call	 _memcpy

; 152  : 				
; 153  : 				this->m_SendBufLen +=nLeft;

  000cc	8b 45 0c	 mov	 eax, DWORD PTR _nLeft$[ebp]
  000cf	01 86 1c 80 0c
	00		 add	 DWORD PTR [esi+819228], eax
  000d5	8b b6 1c 80 0c
	00		 mov	 esi, DWORD PTR [esi+819228]

; 154  : 
; 155  : 				LogAdd("error-L3 : Copy1 : nLeft:%d len:%d nDx:%d", nLeft, this->m_SendBufLen , nDx);

  000db	57		 push	 edi
  000dc	56		 push	 esi
  000dd	50		 push	 eax
  000de	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@
  000e3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000e9	83 c4 1c	 add	 esp, 28			; 0000001cH
  000ec	5f		 pop	 edi
  000ed	5e		 pop	 esi

; 173  : 		{
; 174  : 			break;
; 175  : 		}
; 176  : 	}
; 177  : 	return TRUE;

  000ee	b8 01 00 00 00	 mov	 eax, 1
  000f3	5b		 pop	 ebx

; 178  : }

  000f4	5d		 pop	 ebp
  000f5	c2 08 00	 ret	 8
$LN8@DataSend:

; 156  : 				return TRUE;
; 157  : 			}
; 158  : 		}
; 159  : 
; 160  : 		else if ( nResult == 0 )

  000f8	85 c0		 test	 eax, eax
  000fa	0f 84 80 00 00
	00		 je	 $LN22@DataSend

; 163  : 			break;
; 164  : 		}
; 165  : 		
; 166  : 		if ( nResult >0 )

  00100	7e 07		 jle	 SHORT $LN24@DataSend

; 167  : 		{
; 168  : 			nDx += nResult;
; 169  : 			nLeft -= nResult;

  00102	29 45 0c	 sub	 DWORD PTR _nLeft$[ebp], eax
  00105	03 f8		 add	 edi, eax

; 170  : 			*sendbuflen -= nResult;

  00107	2b d8		 sub	 ebx, eax
$LN24@DataSend:

; 171  : 		}
; 172  : 		if ( nLeft <= 0)

  00109	83 7d 0c 00	 cmp	 DWORD PTR _nLeft$[ebp], 0
  0010d	0f 8f 5d ff ff
	ff		 jg	 $LL10@DataSend

; 173  : 		{
; 174  : 			break;
; 175  : 		}
; 176  : 	}
; 177  : 	return TRUE;

  00113	5f		 pop	 edi
  00114	5e		 pop	 esi
  00115	b8 01 00 00 00	 mov	 eax, 1
  0011a	5b		 pop	 ebx

; 178  : }

  0011b	5d		 pop	 ebp
  0011c	c2 08 00	 ret	 8
$LN19@DataSend:

; 134  : 			{
; 135  : 				LogAdd("error-L3 : %d (%s %d)", WSAGetLastError(), __FILE__, __LINE__);

  0011f	68 87 00 00 00	 push	 135			; 00000087H
  00124	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@MIAGCGEJ@wsShopServerCli?4cpp?$AA@
  00129	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  0012f	50		 push	 eax
  00130	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@
  00135	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd

; 136  : 				*sendbuflen=0;
; 137  : 				this->Close(this->m_socket );

  0013b	8b 46 0c	 mov	 eax, DWORD PTR [esi+12]
  0013e	83 c4 10	 add	 esp, 16			; 00000010H
  00141	50		 push	 eax
  00142	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  00145	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHI@Z ; MyWinsockBase::Close
  0014a	5f		 pop	 edi
  0014b	5e		 pop	 esi

; 138  : 				return FALSE;

  0014c	33 c0		 xor	 eax, eax
  0014e	5b		 pop	 ebx

; 178  : }

  0014f	5d		 pop	 ebp
  00150	c2 08 00	 ret	 8
$LN20@DataSend:

; 142  : 			{
; 143  : 				LogAddC(2,"error-L3 : buffer error closed %d, %d", (*sendbuflen+nLeft), 819200);

  00153	68 00 80 0c 00	 push	 819200			; 000c8000H
  00158	03 c3		 add	 eax, ebx
  0015a	50		 push	 eax
  0015b	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@
  00160	6a 02		 push	 2
  00162	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC

; 144  : 				*sendbuflen = 0;
; 145  : 				this->Close(this->m_socket);

  00168	8b 4e 0c	 mov	 ecx, DWORD PTR [esi+12]
  0016b	83 c4 10	 add	 esp, 16			; 00000010H
  0016e	51		 push	 ecx
  0016f	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  00172	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHI@Z ; MyWinsockBase::Close
  00177	5f		 pop	 edi
  00178	5e		 pop	 esi

; 146  : 				return FALSE;

  00179	33 c0		 xor	 eax, eax
  0017b	5b		 pop	 ebx

; 178  : }

  0017c	5d		 pop	 ebp
  0017d	c2 08 00	 ret	 8
$LN22@DataSend:

; 161  : 		{
; 162  : 			LogAdd("error-L3 : send()  result is zero", WSAGetLastError());

  00180	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  00186	50		 push	 eax
  00187	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@
  0018c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00192	83 c4 08	 add	 esp, 8
  00195	5f		 pop	 edi
  00196	5e		 pop	 esi

; 173  : 		{
; 174  : 			break;
; 175  : 		}
; 176  : 	}
; 177  : 	return TRUE;

  00197	b8 01 00 00 00	 mov	 eax, 1
  0019c	5b		 pop	 ebx

; 178  : }

  0019d	5d		 pop	 ebp
  0019e	c2 08 00	 ret	 8
?DataSend@wsShopServerCli@@QAEHPADH@Z ENDP		; wsShopServerCli::DataSend
_TEXT	ENDS
PUBLIC	??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@ ; `string'
PUBLIC	??_C@_0BL@NPCCNEKA@FD_WRITE?5send?$CI?$CJ?5fail?5?$CGd?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@ ; `string'
PUBLIC	?FDWRITE_MsgDataSend@wsShopServerCli@@QAEHXZ	; wsShopServerCli::FDWRITE_MsgDataSend
;	COMDAT ??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@ DB 'send() '
	DB	'result is zero %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@
CONST	SEGMENT
??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@ DB 'FD_WRI'
	DB	'TE send() WSAEWOULDBLOCK : %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@NPCCNEKA@FD_WRITE?5send?$CI?$CJ?5fail?5?$CGd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BL@NPCCNEKA@FD_WRITE?5send?$CI?$CJ?5fail?5?$CGd?5?$CFd?$AA@ DB 'FD'
	DB	'_WRITE send() fail &d %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@
CONST	SEGMENT
??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@ DB 'err'
	DB	'or-L3 : nDx %d m_SendBufLen %d', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?FDWRITE_MsgDataSend@wsShopServerCli@@QAEHXZ
_TEXT	SEGMENT
?FDWRITE_MsgDataSend@wsShopServerCli@@QAEHXZ PROC	; wsShopServerCli::FDWRITE_MsgDataSend, COMDAT
; _this$ = ecx

; 184  : {

  00000	56		 push	 esi
  00001	57		 push	 edi
  00002	8b f1		 mov	 esi, ecx

; 185  : 	int nResult;
; 186  : 	int nDx;	// Degeneration X :)
; 187  : 	LPBYTE sendbuf;
; 188  : 	int* sendbuflen;
; 189  : 
; 190  : 	nDx=0;
; 191  : 	sendbuf=&this->m_SendBuf[0];
; 192  : 	sendbuflen=&this->m_SendBufLen ;
; 193  : 
; 194  : 	if (this->m_SendBufLen < 1)

  00004	b8 01 00 00 00	 mov	 eax, 1
  00009	33 ff		 xor	 edi, edi
  0000b	39 86 1c 80 0c
	00		 cmp	 DWORD PTR [esi+819228], eax

; 195  : 	{
; 196  : 		return TRUE;

  00011	0f 8c e3 00 00
	00		 jl	 $LN9@FDWRITE_Ms

; 197  : 	}
; 198  : 
; 199  : 	while (*sendbuflen>0)

  00017	53		 push	 ebx
  00018	39 be 1c 80 0c
	00		 cmp	 DWORD PTR [esi+819228], edi
  0001e	0f 8e d0 00 00
	00		 jle	 $LN6@FDWRITE_Ms
$LL7@FDWRITE_Ms:

; 200  : 	{
; 201  : 		nResult=send(this->m_socket, (PCHAR)&sendbuf[nDx], *sendbuflen-nDx, 0);

  00024	8b 86 1c 80 0c
	00		 mov	 eax, DWORD PTR [esi+819228]
  0002a	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  0002d	6a 00		 push	 0
  0002f	2b c7		 sub	 eax, edi
  00031	50		 push	 eax
  00032	8d 4c 3e 1c	 lea	 ecx, DWORD PTR [esi+edi+28]
  00036	51		 push	 ecx
  00037	52		 push	 edx
  00038	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__send@16
  0003e	8b d8		 mov	 ebx, eax

; 202  : 		if (nResult == -1)

  00040	83 fb ff	 cmp	 ebx, -1
  00043	74 4b		 je	 SHORT $LN12@FDWRITE_Ms

; 213  : 				break;
; 214  : 			}
; 215  : 		}
; 216  : 		if (nResult <= 0)

  00045	85 db		 test	 ebx, ebx
  00047	0f 8e 92 00 00
	00		 jle	 $LN13@FDWRITE_Ms

; 219  : 			break;
; 220  : 		}
; 221  : 		LogAdd("error-L3 : nDx %d m_SendBufLen %d", nDx, this->m_SendBufLen );

  0004d	8b 86 1c 80 0c
	00		 mov	 eax, DWORD PTR [esi+819228]
  00053	50		 push	 eax
  00054	57		 push	 edi
  00055	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@
  0005a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd

; 222  : 
; 223  : 		if (nResult > 0)
; 224  : 		{
; 225  : 			nDx += nResult;
; 226  : 			*sendbuflen -= nResult;

  00060	29 9e 1c 80 0c
	00		 sub	 DWORD PTR [esi+819228], ebx

; 227  : 		}
; 228  : 
; 229  : 		LogAdd("error-L3 : nDx %d m_SendBufLen %d", nDx, this->m_SendBufLen );

  00066	8b 8e 1c 80 0c
	00		 mov	 ecx, DWORD PTR [esi+819228]
  0006c	51		 push	 ecx
  0006d	03 fb		 add	 edi, ebx
  0006f	57		 push	 edi
  00070	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@
  00075	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0007b	83 c4 18	 add	 esp, 24			; 00000018H
  0007e	83 be 1c 80 0c
	00 00		 cmp	 DWORD PTR [esi+819228], 0
  00085	7f 9d		 jg	 SHORT $LL7@FDWRITE_Ms

; 230  : 	}
; 231  : 	return TRUE;

  00087	5b		 pop	 ebx
  00088	5f		 pop	 edi
  00089	b8 01 00 00 00	 mov	 eax, 1
  0008e	5e		 pop	 esi

; 232  : }

  0008f	c3		 ret	 0
$LN12@FDWRITE_Ms:

; 203  : 		{
; 204  : 			if ( WSAGetLastError() != WSAEWOULDBLOCK)

  00090	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__WSAGetLastError@0
  00096	ff d7		 call	 edi
  00098	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  0009d	74 26		 je	 SHORT $LN4@FDWRITE_Ms

; 205  : 			{
; 206  : 				LogAdd("FD_WRITE send() fail &d %d", WSAGetLastError(), *sendbuflen);

  0009f	8b 96 1c 80 0c
	00		 mov	 edx, DWORD PTR [esi+819228]
  000a5	52		 push	 edx
  000a6	ff d7		 call	 edi
  000a8	50		 push	 eax
  000a9	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@NPCCNEKA@FD_WRITE?5send?$CI?$CJ?5fail?5?$CGd?5?$CFd?$AA@
  000ae	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000b4	83 c4 0c	 add	 esp, 12			; 0000000cH

; 207  : 				this->Close();

  000b7	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  000ba	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close
  000bf	5b		 pop	 ebx
  000c0	5f		 pop	 edi

; 208  : 				return FALSE;

  000c1	33 c0		 xor	 eax, eax
  000c3	5e		 pop	 esi

; 232  : }

  000c4	c3		 ret	 0
$LN4@FDWRITE_Ms:

; 209  : 			}
; 210  : 			else
; 211  : 			{
; 212  : 				LogAdd("FD_WRITE send() WSAEWOULDBLOCK : %d", WSAGetLastError());

  000c5	ff d7		 call	 edi
  000c7	50		 push	 eax
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@

; 217  : 		{
; 218  : 			LogAdd("send() result is zero %d", WSAGetLastError());

  000cd	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000d3	83 c4 08	 add	 esp, 8
  000d6	5b		 pop	 ebx
  000d7	5f		 pop	 edi

; 230  : 	}
; 231  : 	return TRUE;

  000d8	b8 01 00 00 00	 mov	 eax, 1
  000dd	5e		 pop	 esi

; 232  : }

  000de	c3		 ret	 0
$LN13@FDWRITE_Ms:

; 217  : 		{
; 218  : 			LogAdd("send() result is zero %d", WSAGetLastError());

  000df	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  000e5	50		 push	 eax
  000e6	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@
  000eb	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000f1	83 c4 08	 add	 esp, 8
$LN6@FDWRITE_Ms:

; 230  : 	}
; 231  : 	return TRUE;

  000f4	b8 01 00 00 00	 mov	 eax, 1
  000f9	5b		 pop	 ebx
$LN9@FDWRITE_Ms:

; 232  : }

  000fa	5f		 pop	 edi
  000fb	5e		 pop	 esi
  000fc	c3		 ret	 0
?FDWRITE_MsgDataSend@wsShopServerCli@@QAEHXZ ENDP	; wsShopServerCli::FDWRITE_MsgDataSend
_TEXT	ENDS
PUBLIC	??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@ ; `string'
PUBLIC	?DataRecv@wsShopServerCli@@QAEHXZ		; wsShopServerCli::DataRecv
EXTRN	__imp__recv@16:PROC
;	COMDAT ??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@ DB 'error-L2 : size %d'
	DB	00H						; `string'
CONST	ENDS
;	COMDAT ??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@ DB 'error-L3 : '
	DB	'recv error %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@
CONST	SEGMENT
??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@ DB 'e'
	DB	'rror-L3 : closed %d - buff:%d(%d) ', 00H	; `string'
; Function compile flags: /Ogtp
CONST	ENDS
;	COMDAT ?DataRecv@wsShopServerCli@@QAEHXZ
_TEXT	SEGMENT
_lOfs$ = -4						; size = 4
?DataRecv@wsShopServerCli@@QAEHXZ PROC			; wsShopServerCli::DataRecv, COMDAT
; _this$ = ecx

; 237  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	53		 push	 ebx
  00005	56		 push	 esi
  00006	8b f1		 mov	 esi, ecx

; 238  : 	int nResult;
; 239  : 	unsigned char* recvbuf;
; 240  : 	int* recvbuflen;
; 241  : 	int lOfs;
; 242  : 	int size;
; 243  : 
; 244  : 	recvbuf= (UCHAR*)&this->m_RecvBuf[0]   ;
; 245  : 	recvbuflen=&this->m_RecvBufLen ;
; 246  : 	nResult=recv(this->m_socket , (CHAR*)&recvbuf[*recvbuflen], (819200-*recvbuflen), 0);

  00008	8b 86 20 00 19
	00		 mov	 eax, DWORD PTR [esi+1638432]
  0000e	8b 56 0c	 mov	 edx, DWORD PTR [esi+12]
  00011	6a 00		 push	 0
  00013	b9 00 80 0c 00	 mov	 ecx, 819200		; 000c8000H
  00018	2b c8		 sub	 ecx, eax
  0001a	8d 9e 20 80 0c
	00		 lea	 ebx, DWORD PTR [esi+819232]
  00020	51		 push	 ecx
  00021	03 c3		 add	 eax, ebx
  00023	50		 push	 eax
  00024	52		 push	 edx
  00025	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__recv@16

; 247  : 
; 248  : 	if ( nResult == 0 )

  0002b	85 c0		 test	 eax, eax
  0002d	75 33		 jne	 SHORT $LN14@DataRecv

; 249  : 	{
; 250  : 		LogAdd("error-L3 : closed %d - buff:%d(%d) ", WSAGetLastError(), this->m_RecvBufLen, 819200 - *recvbuflen );

  0002f	8b 8e 20 00 19
	00		 mov	 ecx, DWORD PTR [esi+1638432]
  00035	b8 00 80 0c 00	 mov	 eax, 819200		; 000c8000H
  0003a	2b 86 20 00 19
	00		 sub	 eax, DWORD PTR [esi+1638432]
  00040	50		 push	 eax
  00041	51		 push	 ecx
  00042	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  00048	50		 push	 eax
  00049	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@
  0004e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00054	83 c4 10	 add	 esp, 16			; 00000010H
$LN22@DataRecv:

; 251  : 		return 1;

  00057	5e		 pop	 esi
  00058	b8 01 00 00 00	 mov	 eax, 1
  0005d	5b		 pop	 ebx

; 313  : }

  0005e	8b e5		 mov	 esp, ebp
  00060	5d		 pop	 ebp
  00061	c3		 ret	 0
$LN14@DataRecv:

; 252  : 	}
; 253  : 	else if (nResult == -1 )

  00062	83 f8 ff	 cmp	 eax, -1
  00065	75 2b		 jne	 SHORT $LN12@DataRecv

; 254  : 	{
; 255  : 		if ( WSAGetLastError() == WSAEWOULDBLOCK )

  00067	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR __imp__WSAGetLastError@0
  0006d	ff d6		 call	 esi
  0006f	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H

; 256  : 		{
; 257  : 			return 1;

  00074	74 e1		 je	 SHORT $LN22@DataRecv

; 258  : 		}
; 259  : 		LogAdd("error-L3 : recv error %d", WSAGetLastError() );

  00076	ff d6		 call	 esi
  00078	50		 push	 eax
  00079	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@
  0007e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00084	83 c4 08	 add	 esp, 8
  00087	5e		 pop	 esi

; 260  : 		return 1;

  00088	b8 01 00 00 00	 mov	 eax, 1
  0008d	5b		 pop	 ebx

; 313  : }

  0008e	8b e5		 mov	 esp, ebp
  00090	5d		 pop	 ebp
  00091	c3		 ret	 0
$LN12@DataRecv:

; 261  : 	}
; 262  : 
; 263  : 	*recvbuflen += nResult;

  00092	01 86 20 00 19
	00		 add	 DWORD PTR [esi+1638432], eax

; 264  : 
; 265  : 	if (*recvbuflen<3)

  00098	83 be 20 00 19
	00 03		 cmp	 DWORD PTR [esi+1638432], 3
  0009f	7d 0b		 jge	 SHORT $LN10@DataRecv

; 266  : 	{
; 267  : 		return 3;

  000a1	5e		 pop	 esi
  000a2	b8 03 00 00 00	 mov	 eax, 3
  000a7	5b		 pop	 ebx

; 313  : }

  000a8	8b e5		 mov	 esp, ebp
  000aa	5d		 pop	 ebp
  000ab	c3		 ret	 0
$LN10@DataRecv:

; 268  : 	}
; 269  : 
; 270  : 	lOfs=0;
; 271  : 	size=0;
; 272  : 
; 273  : 	while ( true )
; 274  : 	{
; 275  : 		protocol::MSG_HEADER * lpHead = (protocol::MSG_HEADER *)&recvbuf[lOfs];
; 276  : 		DWORD dwMsgID = lpHead->id;

  000ac	8b 4b 04	 mov	 ecx, DWORD PTR [ebx+4]
  000af	57		 push	 edi

; 277  : 		size = lpHead->size;

  000b0	8b 3b		 mov	 edi, DWORD PTR [ebx]
  000b2	33 c0		 xor	 eax, eax
  000b4	89 45 fc	 mov	 DWORD PTR _lOfs$[ebp], eax

; 278  : 
; 279  : 		if ( size <= 0 )

  000b7	85 ff		 test	 edi, edi
  000b9	7e 42		 jle	 SHORT $LN18@DataRecv
  000bb	eb 06		 jmp	 SHORT $LN9@DataRecv
  000bd	8d 49 00	 npad	 3
$LL20@DataRecv:
  000c0	8b 45 fc	 mov	 eax, DWORD PTR _lOfs$[ebp]
$LN9@DataRecv:

; 282  : 			return 0;
; 283  : 		}
; 284  : 
; 285  : 		if ( size <= *recvbuflen )

  000c3	3b be 20 00 19
	00		 cmp	 edi, DWORD PTR [esi+1638432]
  000c9	7f 4a		 jg	 SHORT $LN6@DataRecv

; 286  : 		{
; 287  : 			this->wsProtocolCore(dwMsgID, (LPBYTE)&recvbuf[lOfs], size);

  000cb	8b 96 24 00 19
	00		 mov	 edx, DWORD PTR [esi+1638436]
  000d1	57		 push	 edi
  000d2	03 c3		 add	 eax, ebx
  000d4	50		 push	 eax
  000d5	51		 push	 ecx
  000d6	ff d2		 call	 edx

; 288  : 			lOfs += size;

  000d8	8b 45 fc	 mov	 eax, DWORD PTR _lOfs$[ebp]

; 289  : 			*recvbuflen -= size;

  000db	29 be 20 00 19
	00		 sub	 DWORD PTR [esi+1638432], edi
  000e1	03 c7		 add	 eax, edi
  000e3	83 c4 0c	 add	 esp, 12			; 0000000cH

; 290  : 
; 291  : 			if ( *recvbuflen <=  0 )

  000e6	83 be 20 00 19
	00 00		 cmp	 DWORD PTR [esi+1638432], 0
  000ed	89 45 fc	 mov	 DWORD PTR _lOfs$[ebp], eax
  000f0	7e 3f		 jle	 SHORT $LN3@DataRecv

; 268  : 	}
; 269  : 
; 270  : 	lOfs=0;
; 271  : 	size=0;
; 272  : 
; 273  : 	while ( true )
; 274  : 	{
; 275  : 		protocol::MSG_HEADER * lpHead = (protocol::MSG_HEADER *)&recvbuf[lOfs];
; 276  : 		DWORD dwMsgID = lpHead->id;

  000f2	8b 3c 18	 mov	 edi, DWORD PTR [eax+ebx]
  000f5	8b 4c 18 04	 mov	 ecx, DWORD PTR [eax+ebx+4]

; 278  : 
; 279  : 		if ( size <= 0 )

  000f9	85 ff		 test	 edi, edi
  000fb	7f c3		 jg	 SHORT $LL20@DataRecv
$LN18@DataRecv:

; 280  : 		{
; 281  : 			LogAdd("error-L2 : size %d", size);

  000fd	57		 push	 edi
  000fe	68 00 00 00 00	 push	 OFFSET ??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@
  00103	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00109	83 c4 08	 add	 esp, 8
  0010c	5f		 pop	 edi
  0010d	5e		 pop	 esi

; 304  : 			break;
; 305  : 		}
; 306  : 		else
; 307  : 		{
; 308  : 			break;
; 309  : 		}
; 310  : 
; 311  : 	}
; 312  : 	return 0;

  0010e	33 c0		 xor	 eax, eax
  00110	5b		 pop	 ebx

; 313  : }

  00111	8b e5		 mov	 esp, ebp
  00113	5d		 pop	 ebp
  00114	c3		 ret	 0
$LN6@DataRecv:

; 292  : 			{
; 293  : 				break;
; 294  : 			}
; 295  : 		}
; 296  : 		else if ( lOfs > 0 )

  00115	85 c0		 test	 eax, eax
  00117	7e 18		 jle	 SHORT $LN3@DataRecv

; 297  : 		{
; 298  : 			if ( *recvbuflen < 1 )

  00119	8b b6 20 00 19
	00		 mov	 esi, DWORD PTR [esi+1638432]
  0011f	83 fe 01	 cmp	 esi, 1
  00122	7c 0d		 jl	 SHORT $LN3@DataRecv

; 299  : 			{
; 300  : 				break;
; 301  : 			}
; 302  : 
; 303  : 			memcpy(recvbuf, &recvbuf[lOfs], *recvbuflen);

  00124	56		 push	 esi
  00125	03 c3		 add	 eax, ebx
  00127	50		 push	 eax
  00128	53		 push	 ebx
  00129	e8 00 00 00 00	 call	 _memcpy
  0012e	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@DataRecv:

; 304  : 			break;
; 305  : 		}
; 306  : 		else
; 307  : 		{
; 308  : 			break;
; 309  : 		}
; 310  : 
; 311  : 	}
; 312  : 	return 0;

  00131	5f		 pop	 edi
  00132	5e		 pop	 esi
  00133	33 c0		 xor	 eax, eax
  00135	5b		 pop	 ebx

; 313  : }

  00136	8b e5		 mov	 esp, ebp
  00138	5d		 pop	 ebp
  00139	c3		 ret	 0
?DataRecv@wsShopServerCli@@QAEHXZ ENDP			; wsShopServerCli::DataRecv
_TEXT	ENDS
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Ogtp
;	COMDAT ??_GwsShopServerCli@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GwsShopServerCli@@UAEPAXI@Z PROC			; wsShopServerCli::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1wsShopServerCli@@UAE@XZ ; wsShopServerCli::~wsShopServerCli
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 09		 je	 SHORT $LN4@scalar
  00011	56		 push	 esi
  00012	e8 00 00 00 00	 call	 ??3@YAXPAX@Z		; operator delete
  00017	83 c4 04	 add	 esp, 4
$LN4@scalar:
  0001a	8b c6		 mov	 eax, esi
  0001c	5e		 pop	 esi
  0001d	5d		 pop	 ebp
  0001e	c2 04 00	 ret	 4
??_GwsShopServerCli@@UAEPAXI@Z ENDP			; wsShopServerCli::`scalar deleting destructor'
_TEXT	ENDS
END
